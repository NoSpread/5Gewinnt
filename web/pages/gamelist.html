<html>
    <head>
        <title>Live Game List</title>
        <script>
            function loadGameList() {
                var xhttp = new XMLHttpRequest();

                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        var gameList = JSON.parse(this.responseText);
                        var table = document.getElementById('gameList');

                        while (table.firstChild) {
                            table.removeChild(table.firstChild);
                        }

                        for (let i = 0; i < gameList.length; i++) {
                            let newRow = document.createElement('tr');

                            let idCell = document.createElement('td');
                            idCell.appendChild(document.createTextNode(gameList[i].id))

                            let playerCell = document.createElement('td');
                            playerCell.appendChild(document.createTextNode(gameList[i].player1))

                            newRow.appendChild(idCell);
                            newRow.appendChild(playerCell);

                            table.appendChild(newRow);
                        }
                    }
                };

                xhttp.open('POST', '../res/php/getgamelist.php', true);
                xhttp.send();
            }
        </script>
    </head>
    <body onload='setInterval(loadGameList, 1000);'>
        <h1>Live Game List &#129354;</h1>
        <table border='1'>
            <thead>
                <td>Game ID</td>
                <td>Challenging Player</td>
            </thead>
            <tbody id='gameList'><tbody>
        </table>
    </body>
</html>
